(function(e){"use strict";function t(t){return this.each(function(){var n=e(this),s="object"==typeof t&&t,o=n.data("boxselect");if(!o){o=new i(this,s);n.data("boxselect",o)}})}var i=function(t,n){this.$element=e(t),this.$head=e("html head"),this.$body=e("html body"),this.$doc=e(document),this.$selectBox={},this.options=e.extend({},i.Defaults,n),this.init()};i.Defaults={},i.prototype.init=function(){var t=this,i=(t.options,0),o=0,c=!1;n(t);var d=e('<div class="select-box"></div>');t.$body.append(d),t.$selectBox=d,t.$element.on({mousedown:function(e){c=!0,i=e.pageX,o=e.pageY,t.$selectBox.css({left:i,top:o}),u(e)},mousemove:function(e){if(c&&1===e.which){var n=e.pageX,a=e.pageY;s(t,i,n,o,a),l(t),u(e)}},mouseup:function(e){a(t),c=!1}}),t.$doc.off("mouseup").on({mouseup:function(e){a(t),c=!1}})};var n=function(e){var t=".select-box {position: absolute;display: none;width: 0px;height: 0px;padding: 0px;margin: 0px;border: 1px dashed #0099ff;background-color: #c3d5ed;opacity: 0.5;filter: alpha(opacity=50);font-size: 0px;z-index: 99999;pointer-events: none;}";t="<style>"+t+"</style>",e.$head.append(t)},s=function(e,t,i,n,s){e.$selectBox.show();var o=Math.min(i,t),c=Math.min(s,n),l=Math.abs(i-t),a=Math.abs(s-n);e.$selectBox.css({left:o,top:c,width:l,height:a})},o=function(e){var t=e.offset().left,i=e.offset().top,n=t+e.outerWidth(),s=i+e.outerHeight();return{x1:t,x2:n,y1:i,y2:s}},c=function(e,t){var i=!0,n=!0;return i=e.x1>t.x2||t.x1>e.x2,n=e.y1>t.y2||t.y1>e.y2,!(i||n)},l=function(t){t.options;var i=o(t.$selectBox);t.$element.find(".select-item").each(function(){var t=e(this),n=o(t);c(i,n)?t.is(".select-item.selected-item")?t.removeClass("selected-item selecting-item").addClass("unselecting-item"):t.is(".select-item.unselecting-item")||t.addClass("selecting-item"):t.is(".select-item.unselecting-item")?t.addClass("selected-item").removeClass("unselecting-item"):t.removeClass("selecting-item")})},a=function(e){e.options;e.$element.find(".select-item.selecting-item").removeClass("selecting-item").addClass("selected-item"),e.$element.find(".select-item.unselecting-item").removeClass("selecting-item selected-item unselecting-item"),e.$selectBox.hide()},u=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,e.preventDefault?e.preventDefault():e.returnValue=!1},d=e.fn.JBoxSelect;e.fn.JBoxSelect=t,e.fn.JBoxSelect.Constructor=i,e.fn.JBoxSelect.noConflict=function(){return e.fn.JBoxSelect=d,this}})(jQuery);