!function(t){"function"!=typeof define||!define.amd&&!define.cmd||jQuery?"object"==typeof module&&module.exports?module.exports=function(e,a){return void 0===a&&(a="undefined"!=typeof window?require("jquery"):require("jquery")(e)),t(a),a}:t(jQuery):define(["jquery"],t)}(function(s){function i(e,a){0!=parseInt(a.totalData)&&0!=parseInt(a.pageSize)?a.pageCount=0:0!=a.totalData&&0!=a.pageSize||0==a.pageCount||(a.totalData=0,a.pageSize=0);var l=a,t=s(document),p=s(e);l.prevCls="prev",l.nextCls="next",l.jumpIptCls="jump-ipt",l.jumpBtnCls="jump-btn",l.pSizeIptCls="psize-ipt";var o=this;function n(){var e=p.attr("class"),a=e||""!=l.className?""!=l.className?l.className:e:"JPage",t=o.getPageCount(),n=function(){var e=1,a=10,t={},n=o.getPageCount(),i=l.pageIndex,s=(l.pageSize,l.pageRange);return e=i-s,n<(a=i+s)&&(e=(e=(a=n)-2*s)<1?1:e),e<=1&&(e=1,a=Math.min(2*s+1,n)),t.startPage=e,t.endPage=a,t}();pageIndex=parseInt(l.pageIndex);var i='<div class="'+a+'"><div class="pagesBox"><ul id="pager">';if(l.showPN&&(pageIndex<=1?l.autoHidePN||(i+='<li class="'+l.disableCls+'"><a href="javascript:;">'+l.prevContent+"</a></li>"):i+='<li class="'+l.prevCls+'"><a href="javascript:;">'+l.prevContent+"</a></li>"),n.startPage<=3)for(var s=1;s<n.startPage;s++)s==pageIndex?i+="<li class="+l.activeCls+"><span>"+s+"</span></li>":i+='<li><a href="javascript:;" data-page="'+s+'">'+s+"</a></li>";else{if(l.showHE)i+='<li><a href="javascript:;" data-page="1">'+(l.homeContent?l.homeContent:"1")+"</a></li>";i+='<li class="ellips"><span>...</span></li>'}for(s=n.startPage;s<=n.endPage;s++)s==pageIndex?i+="<li class="+l.activeCls+"><span>"+s+"</span></li>":i+='<li><a href="javascript:;" data-page="'+s+'">'+s+"</a></li>";if(n.endPage>=t-2)for(s=n.endPage+1;s<=t;s++)i+='<li><a href="javascript:;" data-page="'+s+'">'+s+"</a></li>";else i+='<li class="ellips"><span>...</span></li>',l.showHE&&(i+='<li><a href="javascript:;" data-page="'+t+'">'+(l.endContent?l.endContent:t)+"</a></li>");l.showPN&&(pageIndex>=t?l.autoHidePN||(i+='<li class="'+l.disableCls+'"><a href="javascript:;">'+l.nextContent+"</a></li>"):i+='<li class="'+l.nextCls+'"><a href="javascript:;">'+l.nextContent+"</a></li>"),i+="</ul></div>",l.showPageSize&&0!=l.pageSize&&(i+='<div class="pSizeBox"><div><label>'+l.pSizeLabel+': </label><input title="请按回车跳转" type="text" class="'+l.pSizeIptCls+'"value="'+l.pageSize+'"></div></div>'),l.showJump&&(i+='<div class="jumpBox"><div><label>到第&nbsp;</label><input title="请按回车跳转" type="text" class="'+l.jumpIptCls+'"/><label>&nbsp;页</label>',l.showJumpBtn?i+='<button class="'+l.jumpBtnCls+'">'+l.jumpBtn+"</button></div></div>":i+="</div></div>"),i+="</div>",p.empty().html(i)}this.setPageCount=function(e){l.pageCount=e},this.setTotalData=function(e){l.totalData=e},this.setPageSize=function(e){l.pageSize=e},this.setPageIndex=function(e){l.pageIndex=e},this.getPageSize=function(){return l.pageSize},this.getPageCount=function(){return l.totalData&&l.pageSize?Math.ceil(parseInt(l.totalData)/l.pageSize):l.pageCount},this.getPageIndex=function(){return l.pageIndex},this.refresh=function(e,a,t){o.setPageIndex(e),o.setPageSize(a),o.setTotalData(t),o.init()},this.init=function(){n(),function(){var e=1;p.off().on("click","li",function(){if(s(this).hasClass(l.activeCls)||s(this).hasClass(l.disableCls)||s(this).hasClass("ellips"))return!1;if(s(this).hasClass(l.nextCls)){if(p.find("li."+l.activeCls).text()>=o.getPageCount())return!1;e=parseInt(p.find("li."+l.activeCls).text())+1}else if(s(this).hasClass(l.prevCls)){if(p.find("li."+l.activeCls).text()<=1)return!1;e=parseInt(p.find("li."+l.activeCls).text())-1}else e=parseInt(s(this.firstChild).data("page"));l.pageIndex=e,n(),"function"==typeof l.callback&&l.callback(o)}),p.on("click","button."+l.jumpBtnCls,function(){if(s(this).hasClass(l.jumpBtnCls)){if(""===p.find("."+l.jumpIptCls).val())return;e=parseInt(p.find("."+l.jumpIptCls).val()),l.pageIndex=e,n(),"function"==typeof l.callback&&l.callback(o)}}),p.on("input propertychange",function(e){var a=e.srcElement?e.srcElement:e.target,t=s(a),n=(s(this),t.val()),i=/[^\d]/g;i.test(n)&&t.val(n.replace(i,"")),t.hasClass(l.jumpIptCls)?(parseInt(n)>o.getPageCount()&&t.val(o.getPageCount()),0===parseInt(n)&&t.val(1)):t.hasClass(l.pSizeIptCls)&&(parseInt(n)>l.totalData&&t.val(l.totalData),parseInt(n)>l.maxPageSize&&t.val(l.maxPageSize),0===parseInt(n)&&t.val(1))}),t.off("keydown").keydown(function(e){if(13==e.keyCode){if(eElement=e.srcElement?e.srcElement:e.target,""==s(eElement).val())return;switch(s(eElement).attr("class")){case l.jumpIptCls:var a=parseInt(s(eElement).val());l.pageIndex=a,n(),"function"==typeof l.callback&&l.callback(o);break;case l.pSizeIptCls:var t=parseInt(s(eElement).val());l.pageSize=t,l.pageIndex=1,n(),"function"==typeof l.callback&&l.callback(o)}}})}(),l.isHide&&"1"==this.getPageCount()||"0"==this.getPageCount()?p.hide():p.show()},this.init()}var l={totalData:0,pageSize:0,pageCount:0,pageIndex:1,pageRange:2,isHide:!1,disableCls:"disabled",activeCls:"active",className:"",showPN:!0,autoHidePN:!0,prevContent:"<",nextContent:">",showHE:!0,homeContent:"",endContent:"",showJump:!0,showJumpBtn:!0,jumpBtn:"Go",showPageSize:!1,maxPageSize:50,pSizeLabel:"页大小",callback:function(){}};s.fn.jPage=function(e,a){"function"==typeof e?(a=e,e={}):(e=e||{},a=a||function(){});var t=s.extend({},l,e),n={};return this.each(function(){n=new i(this,t),a(n),n.init()}),n}});